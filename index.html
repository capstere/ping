<!doctype html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#ffffff" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <meta name="mobile-web-app-capable" content="yes" />
  <title>Jesper i rummet</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="topbar">
    <div class="topbar__left">
      <div class="brand">âœ¨Jul med JESPâœ¨</div>
      <div class="countdown">Tillbaka till mitt hÃ¶rn: <span id="countdownValue" class="countdown__value">â€¦</span></div>
      <div id="mood" class="mood" aria-live="polite">Mood: ğŸ˜</div>
    </div>
    <div class="topbar__right">
      <button id="soundBtn" class="btn">ğŸ”Š Ljud: AV</button>
      <button id="hintBtn" class="btn btn--alt btn--icon" aria-label="Hint">ğŸ’¡</button>
      <button id="achBtn" class="btn btn--alt btn--icon" aria-label="Achievements">ğŸ†</button>
      <button id="helpBtn" class="btn btn--alt btn--icon" aria-label="Help">?</button>
    </div>
  </header>

  <main class="app">
    <section class="screen" aria-label="Spel">
      <canvas id="game"></canvas>
      <div id="toast" class="toast hidden"></div>
      <div id="bubble" class="bubble hidden"></div>
      <div class="hint">Det blir bra till jul</div>
    </section>

    <section class="controls" aria-label="Kontroller">
      <button id="kickBtn" class="btn btn--big">ğŸ‘Š Punch</button>
      <button id="sitBtn" class="btn btn--big btn--alt">ğŸª‘ Sit</button>
      <button id="danceBtn" class="btn btn--big hidden">ğŸ•º Dance</button>
    </section>
  </main>

  <div id="helpModal" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modal__card">
      <div class="modal__title">WTF!?</div>
      <div class="modal__body">
        <p><b>Spel:</b>GÃ¥ runt lite</p>
        <p><b>Syfte:</b>Inget</p>
        <p><b>MÃ¥l:</b>â° â†’ ğŸ¬ â†’ â­ â†’ ğŸª‘</p>
      </div>
      <div class="modal__actions">
        <button id="closeHelpBtn" class="btn btn--big">Aha...</button>
      </div>
    </div>
  </div>


  <div id="achModal" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modal__card">
      <div class="modal__title">ğŸ† Achievements</div>
      <div class="modal__body">
        <div class="achStats">
          <div><b>Boops:</b> <span id="boopCount">0</span></div>
          <div><b>This run:</b> <span id="runTime">â€”</span></div>
          <div><b>Best:</b> <span id="bestTime">â€”</span></div>
        </div>
        <ul class="achList">
          <li class="achItem" data-ach="booper"><span class="achBadge">â¬œ</span> Wall Booper</li>
          <li class="achItem" data-ach="speedrunner"><span class="achBadge">â¬œ</span> Speedrunner</li>
          <li class="achItem" data-ach="confetti"><span class="achBadge">â¬œ</span> Confetti Survivor</li>
          <li class="achItem" data-ach="door"><span class="achBadge">â¬œ</span> Found the Hidden Door</li>
        </ul>
        <div class="smallmuted">Tip: boopa den pyttelilla hemliga pixeln nÃ¤ra tavlan ğŸ‘€</div>
      </div>
      <div class="modal__actions">
        <button id="closeAchBtn" class="btn btn--big">StÃ¤ng</button>
      </div>
    </div>
  </div>

  <div id="wonder" class="wonder hidden" role="dialog" aria-modal="true">
    <div class="wonder__card">
      <div class="wonder__title">The return of the JESP</div>
      <div class="wonder__subtitle">Julfrid uppnÃ¥dd.</div>

      <div class="wonder__art">
        <img id="wonderImg" class="wonder__img" src="assets/julbild.jpg" alt="Julbild" />
        <div id="wonderFallback" class="wonder__fallback hidden">
          <div class="sparkle">âœ¨</div><div class="sparkle">âœ¨</div><div class="sparkle">âœ¨</div><div class="sparkle">âœ¨</div>
          <div class="sparkle">âœ¨</div><div class="sparkle">âœ¨</div><div class="sparkle">âœ¨</div><div class="sparkle">âœ¨</div>
          <div class="fallbackText">LÃ¤gg en bild i <b>/assets/julbild.jpg</b></div>
        </div>
      </div>

      <div class="wonder__actions">
        <button id="closeWonderBtn" class="btn btn--big">Tillbaka till rummet</button>
        <a id="doorLink" class="btn btn--big btn--alt" href="https://capstere.github.io/7thJan26/" target="_blank" rel="noopener">ğŸšª Hidden door</a>
        <button id="highFiveBtn" class="btn btn--big">âœ‹ Highâ€‘five</button>
      </div>
    </div>
  </div>


  <!-- Preload tavla-bilden (ritas pÃ¥ vÃ¤ggen i canvas) -->
  <!-- Du kan byta till en GIF (t.ex. assets/tavla.gif) om du vill ha animation -->
  <canvas id="confetti" class="confetti" aria-hidden="true"></canvas>

  <img id="tavlaImg" src="assets/tavla.gif" alt="Tavla"
       style="position:fixed;left:-9999px;top:-9999px;width:1px;height:1px;opacity:0;pointer-events:none;" />

  <script src="main.js"></script>
  <script>
    // Service worker (offline cache) â€” krÃ¤ver https eller localhost
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("sw.js").catch(console.warn);
    }
  </script>

</body>
</html>

